<div class="plazza-wrapper display-flex flex-column p-50">
    <section class="display-flex flex-column" [class.my-100]="i > 0 && i < dataList.length - 1" [class.mb-100]="i === 0"
        [class.mt-100]="i === dataList.length - 1" *ngFor="let model of dataList, index as i">
        <app-widgets-item-holder *ngIf="model.metadata === undefined"></app-widgets-item-holder>
        <div class="section-head display-grid gx-100" *ngIf="model.metadata !== undefined">
            <span class="avatar mat-elevation-z4 border-radius-circle bg-pshare align-self-center p-25"
                [style.grid-row]="'1 / 3'">
                <img class="" [src]="model.metadata.icon" alt="" width="100%" height="100%">
            </span>
            <h1 class="font-size-16 my-0" [style.grid-row]="'1 / 2'">{{model.metadata.name}}</h1>
            <p class="font-size-10 display-flex justify-content-space-between my-0" [style.grid-row]="'2 / 3'">
                <span>Subscriptions: {{model.metadata.subscription | count}}</span>
                <span>Subscribed: {{model.metadata.subscribed | count}}</span>
            </p>
            <button mat-raised-button color="primary" [style.grid-row]="'1 / 3'">
                <mat-icon class="mr-25">notifications</mat-icon>
                Subscribe
            </button>
        </div>
        <mat-divider class="my-100"></mat-divider>
        <div class="section-body display-grid justify-items-stretch align-items-stretch g-50 mb-25"
            [style.grid-template-rows]="rows">
            <mat-card class="item fit-height bg-pshare-700 bg-texture mat-elevation-z0"
                [class.await]="model.recommend.audioGroup === undefined" #item>
                <mat-card-title-group>
                    <mat-card-title class="font-size-16 font-weight-bold">Audio Express Title</mat-card-title>
                </mat-card-title-group>
                <mat-card-content class="none my-0">
                    <app-widgets-carousel [sources]="model.recommend.audioGroup.cgmGroup" [duration]="2500"
                        [(index)]="model.recommend.audioGroup.cgmIndex"
                        (source)="model.recommend.audioGroup.cgmSelect = $event">
                    </app-widgets-carousel>
                </mat-card-content>
                <mat-card-content class="font-size-12 text-align-center">
                    {{model.recommend.audioGroup.cgmSelect === undefined ? '' :
                    model.recommend.audioGroup.cgmSelect.cumSubject}}
                </mat-card-content>
            </mat-card>
            <mat-card class="item fit-height bg-pshare-700 bg-texture mat-elevation-z0"
                [class.await]="model.recommend.videoGroup === undefined">
                <mat-card-title-group>
                    <mat-card-title class="font-size-16 font-weight-bold">Video Express Title</mat-card-title>
                </mat-card-title-group>
                <mat-card-content class="none my-0">
                    <app-widgets-carousel [sources]="model.recommend.videoGroup.cgmGroup" [duration]="2500"
                        [(index)]="model.recommend.videoGroup.cgmIndex"
                        (source)="model.recommend.videoGroup.cgmSelect = $event">
                    </app-widgets-carousel>
                </mat-card-content>
                <mat-card-content class="font-size-12 text-align-center">
                    {{model.recommend.videoGroup.cgmSelect === undefined ? '' :
                    model.recommend.videoGroup.cgmSelect.cumSubject}}
                </mat-card-content>
            </mat-card>
            <mat-card class="item fit-height bg-pshare-700 bg-texture mat-elevation-z0"
                [class.await]="model.recommend.articleGroup === undefined">
                <mat-card-title-group>
                    <mat-card-title class="font-size-16 font-weight-bold">Article Express Title</mat-card-title>
                </mat-card-title-group>
                <mat-card-content class="none my-0">
                    <app-widgets-carousel [sources]="model.recommend.articleGroup.cgmGroup" [duration]="2500"
                        [(index)]="model.recommend.articleGroup.cgmIndex"
                        (source)="model.recommend.articleGroup.cgmSelect = $event">
                    </app-widgets-carousel>
                </mat-card-content>
                <mat-card-content class="font-size-12 text-align-center">
                    {{model.recommend.articleGroup.cgmSelect === undefined ? '' :
                    model.recommend.articleGroup.cgmSelect.cumSubject}}
                </mat-card-content>
            </mat-card>
            <mat-card class="item fit-height bg-pshare-700 bg-texture mat-elevation-z0"
                [class.await]="model.recommend.galleryGroup === undefined">
                <mat-card-title-group>
                    <mat-card-title class="font-size-16 font-weight-bold">Gallery Express Title</mat-card-title>
                </mat-card-title-group>
                <mat-card-content class="none my-0">
                    <app-widgets-carousel [sources]="model.recommend.galleryGroup.cgmGroup" [duration]="2500"
                        [(index)]="model.recommend.galleryGroup.cgmIndex"
                        (source)="model.recommend.galleryGroup.cgmSelect = $event">
                    </app-widgets-carousel>
                </mat-card-content>
                <mat-card-content class="font-size-12 text-align-center">
                    {{model.recommend.galleryGroup.cgmSelect === undefined ? '' :
                    model.recommend.galleryGroup.cgmSelect.cumSubject}}
                </mat-card-content>
            </mat-card>
            <mat-card class="item item-list bg-pshare-700 bg-texture mat-elevation-z0">
                <mat-card-title-group>
                    <mat-card-title class="font-size-16 font-weight-bold">Events Express</mat-card-title>
                </mat-card-title-group>
                <mat-divider></mat-divider>
                <mat-card-content class="none event scroll-share">
                    <mat-nav-list class="p-0 my-50">
                        <ng-container *ngFor="let message of model.events">
                            <a mat-list-item class="item py-25" [routerLink]="['/']" *ngIf="message !== undefined">
                                <h1 class="font-size-12 font-weight-bold my-25" matLine>{{message.messageSubject}}</h1>
                                <p class="font-size-10 text-overflow my-0 my-25" matLine>{{message.messageCreateTime |
                                    date:
                                    'yyy-MM-dd'}}
                                </p>
                            </a>
                            <mat-list-item class="py-25" *ngIf="message === undefined">
                                <app-widgets-item-holder></app-widgets-item-holder>
                            </mat-list-item>
                        </ng-container>
                    </mat-nav-list>
                </mat-card-content>
            </mat-card>
        </div>
        <div class="section-foot mt-25">
            <app-widgets-orbit [units]="model.dataset"></app-widgets-orbit>
        </div>
    </section>
</div>